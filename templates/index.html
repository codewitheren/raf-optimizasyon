<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÃœrÃ¼n SÄ±nÄ±flandÄ±rma ve MaÄŸaza Optimizasyonu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Section 1: Single Prediction (Keep existing) -->
    <div class="container">
        <h1>ÃœrÃ¼n Kategorisi Tahmini</h1>
        <form id="prediction-form"> <label for="product_name">ÃœrÃ¼n Ä°smi:</label> <input type="text" id="product_name" name="product_name" required> <label for="model_choice">Model SeÃ§imi:</label> <select id="model_choice" name="model_choice"> <option value="naive_bayes">Naive Bayes</option> <option value="decision_tree">Decision Tree</option> <option value="logistic_regression">Logistic Regression</option> </select> <button type="submit">Tahmin Et</button> </form>
        <div id="result" class="result-box" style="display: none;"><p id="prediction"></p></div>
    </div>

    <!-- Section 2: Bulk Analysis (Keep existing) -->
    <div class="container">
        <h2>Toplu SipariÅŸ Analizi ve Birliktelik KurallarÄ±</h2>
        <form id="bulk-prediction-form"> <label for="csv_file">SipariÅŸleri iÃ§eren CSV dosyasÄ±nÄ± seÃ§in:</label> <input type="file" id="csv_file" name="csv_file" accept=".csv" required> <label for="bulk_model_choice">Model SeÃ§imi:</label> <select id="bulk_model_choice" name="model_choice"> <option value="naive_bayes">Naive Bayes</option> <option value="decision_tree">Decision Tree</option> <option value="logistic_regression">Logistic Regression</option> </select> <button type="submit">Toplu Analiz Et</button> </form>
        <div id="bulk-result" style="display: none; margin-top: 30px;"> <div id="bulk-loading" class="loading-message" style="display: none;">Analiz ediliyor...</div> <div id="bulk-error" class="error-message" style="display: none;"></div> <div id="bulk-content" style="display: none;"> <h3>SipariÅŸ BazlÄ± Kategori Tahminleri:</h3> <div id="bulk-predictions"></div> <div class="association-results" id="association-results-container" style="display: none;"> <h3 class="association-title">Birliktelik Analizi SonuÃ§larÄ±:</h3> <div id="association-rules"></div> <div id="association-info"></div> <div class="metrics-explanation">
    <h4>Birliktelik KurallarÄ± NasÄ±l YorumlanÄ±r?</h4>
    <div class="metric-card">
        <div class="metric-icon">ğŸ“Š</div>
        <div class="metric-content">
            <strong>Destek (Support):</strong> 
            <p>Belirtilen kategorilerin tÃ¼m sipariÅŸlerde birlikte gÃ¶rÃ¼lme oranÄ±nÄ± gÃ¶sterir. Ã–rneÄŸin, 0.2 destek deÄŸeri, bu kategorilerin tÃ¼m sipariÅŸlerin %20'sinde birlikte yer aldÄ±ÄŸÄ± anlamÄ±na gelir.</p>
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-icon">ğŸ”„</div>
        <div class="metric-content">
            <strong>GÃ¼ven (Confidence):</strong> 
            <p>Bir mÃ¼ÅŸteri 'EÄŸer' kÄ±smÄ±ndaki kategoriden alÄ±rsa, 'O zaman' kÄ±smÄ±ndaki kategoriyi de alma olasÄ±lÄ±ÄŸÄ±nÄ± belirtir. Ã–rneÄŸin, 0.8 gÃ¼ven deÄŸeri, ilk kategori alÄ±ndÄ±ÄŸÄ±nda ikinci kategorinin %80 olasÄ±lÄ±kla alÄ±nacaÄŸÄ±nÄ± gÃ¶sterir.</p>
        </div>
    </div>
    <div class="metric-card">
        <div class="metric-icon">âš–ï¸</div>
        <div class="metric-content">
            <strong>Lift:</strong> 
            <p>Ä°ki kategori arasÄ±ndaki iliÅŸkinin gÃ¼cÃ¼nÃ¼ Ã¶lÃ§er:</p>
            <ul>
                <li><span class="lift-positive">Lift > 1:</span> Pozitif iliÅŸki - Bu kategoriler rastgele beklenenden daha sÄ±k birlikte alÄ±nÄ±yor</li>
                <li><span class="lift-neutral">Lift = 1:</span> NÃ¶tr iliÅŸki - Kategoriler birbirinden baÄŸÄ±msÄ±z</li>
                <li><span class="lift-negative">Lift < 1:</span> Negatif iliÅŸki - Bu kategoriler nadiren birlikte alÄ±nÄ±yor</li>
            </ul>
        </div>
    </div>
</div> </div> </div> </div>
    </div>

    <!-- Section 3: Playground - DRAG & DROP -->
    <div class="container">
        <h2>Market Raf DÃ¼zeni Optimizasyonu</h2>
        
        <!-- Algoritma AÃ§Ä±klama Kutusu -->
        <div class="algorithm-info-box">
            <h4>ğŸ“Š Algoritma NasÄ±l Ã‡alÄ±ÅŸÄ±r?</h4>
            <div class="algorithm-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <div>
                        <h5>Veri Toplama</h5>
                        <p>SipariÅŸ verilerinden Ã¼rÃ¼n kategorileri belirlenir.</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">2</span>
                    <div>
                        <h5>Birliktelik Analizi</h5>
                        <p>Hangi kategorilerin birlikte satÄ±n alÄ±ndÄ±ÄŸÄ± analiz edilir (Lift > 1 olan pozitif iliÅŸkiler).</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">3</span>
                    <div>
                        <h5>Kategori Puanlama</h5>
                        <p>Her kategori, iliÅŸki gÃ¼cÃ¼ne gÃ¶re puanlanÄ±r.</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">4</span>
                    <div>
                        <h5>Raf Mesafe Hesaplama</h5>
                        <p>Raflar arasÄ± Ã–klid mesafeleri hesaplanÄ±r.</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">5</span>
                    <div>
                        <h5>Optimizasyon</h5>
                        <p><strong>"Ä°liÅŸkili Kategorileri YakÄ±n Tut":</strong> Ä°liÅŸkisi yÃ¼ksek olan kategorilerin raflarÄ± birbirine yakÄ±n yerleÅŸtirilir.<br>
                        <strong>"Ä°liÅŸkili Kategorileri Uzak Tut":</strong> Ä°liÅŸkisi yÃ¼ksek olan kategorilerin raflarÄ± birbirinden uzaÄŸa yerleÅŸtirilir.</p>
                    </div>
                </div>
            </div>
            <div class="algorithm-validation">
                <p><strong>DoÄŸrulama Ä°pucu:</strong> FarklÄ± raf dÃ¼zenleri oluÅŸturarak ve optimizasyon hedefini deÄŸiÅŸtirerek sonuÃ§larÄ± karÅŸÄ±laÅŸtÄ±rÄ±n. 
                Birliktelik kurallarÄ±nda Lift > 1 olan kategorilerin yerleÅŸimini kontrol edin.</p>
            </div>
        </div>
        
        <form id="playground-form">
            
            <label>MaÄŸaza AlanÄ±:</label>
            <div id="store-layout-wrapper">
                <div id="store-layout-area" style="width: 1000px;">
                    <!-- Draggable shelves will be added here by JS -->
                </div>
            </div>
            <button type="button" id="add-shelf-btn">+ Raf Ekle</button>

            <label for="playground_csv_file">SipariÅŸ Verilerini Ä°Ã§eren CSV DosyasÄ±:</label>
            <input type="file" id="playground_csv_file" name="csv_file" accept=".csv" required>

            <label for="playground_model_choice">Kategori Tahmin Modeli:</label>
            <select id="playground_model_choice" name="model_choice">
                <option value="naive_bayes">Naive Bayes</option>
                <option value="decision_tree">Decision Tree</option>
                <option value="logistic_regression">Logistic Regression</option>
            </select>

            <label for="time_goal">Optimizasyon Hedefi:</label>
            <select id="time_goal" name="time_goal">
                <option value="maximize">Ä°liÅŸkili Kategorileri YakÄ±n Tut</option>
                <option value="minimize">Ä°liÅŸkili Kategorileri Uzak Tut</option>
            </select>

            <button type="submit">Kategori Ã–nerilerini Al</button>
        </form>

        <div id="playground-result" style="display: none; margin-top: 30px;">
            <div id="playground-loading" class="loading-message" style="display: none;">Ã–neriler hesaplanÄ±yor...</div>
            <div id="playground-error" class="error-message" style="display: none;"></div>
            <div id="playground-content" style="display: none;">
                <h3>Raf Kategori Ã–nerileri:</h3>
                <ul id="recommendation-list" class="recommendation-list"></ul>
                <div id="unassigned-info" class="unassigned-info" style="display: none;"></div>
                
                <div class="playground-association-summary">
                     <h4>Analiz Ã–zeti:</h4>
                     <div id="playground-association-info"></div>
                     <div id="playground-top-rules"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
