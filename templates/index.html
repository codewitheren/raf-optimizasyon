<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ürün Sınıflandırma ve Mağaza Optimizasyonu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <div class="brand-icon">🏪</div>
                <span class="brand-text">SmartStore AI</span>
            </div>
            <ul class="navbar-menu" id="navbar-menu">
                <li class="navbar-item">
                    <a href="#tahmin" class="navbar-link">Ürün Tahmini</a>
                </li>
                <li class="navbar-item">
                    <a href="#analiz" class="navbar-link">Toplu Analiz</a>
                </li>
                <li class="navbar-item">
                    <a href="#optimizasyon" class="navbar-link">Raf Optimizasyonu</a>
                </li>
                <li class="navbar-item">
                    <a href="#hakkinda" class="navbar-link">Hakkında</a>
                </li>
            </ul>
            <div class="navbar-toggle" id="navbar-toggle">
                <span class="toggle-bar"></span>
                <span class="toggle-bar"></span>
                <span class="toggle-bar"></span>
            </div>
        </div>
    </nav>
    {% extends "base.html" %}

{% block title %}Ana Sayfa - SmartStore AI{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-background"></div>
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    <span class="highlight">SmartStore AI</span> ile 
                    <span class="typing-text">Mağazanızı Optimize Edin</span>
                </h1>
                <p class="hero-subtitle">
                    Yapay zeka destekli ürün sınıflandırma ve birliktelik analizi ile 
                    satışlarınızı artırın, müşteri deneyimini geliştirin.
                </p>
                <div class="hero-buttons">
                    <a href="#tahmin" class="cta-button primary">
                        <span class="button-icon">🚀</span>
                        Hemen Deneyin
                    </a>
                    <a href="#hakkinda" class="cta-button secondary">
                        <span class="button-icon">📖</span>
                        Daha Fazla Bilgi
                    </a>
                </div>
            </div>
            <div class="hero-visual">
                <div class="floating-cards">
                    <div class="floating-card card-1">
                        <div class="card-icon">🤖</div>
                        <div class="card-text">AI Tahmin</div>
                    </div>
                    <div class="floating-card card-2">
                        <div class="card-icon">📊</div>
                        <div class="card-text">Analiz</div>
                    </div>
                    <div class="floating-card card-3">
                        <div class="card-icon">🎯</div>
                        <div class="card-text">Optimizasyon</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 1: Single Prediction -->
    <div class="container" id="tahmin">
        <h2>Ürün Kategori Tahmini</h2>
        <form id="prediction-form">
            <label for="product_name">Ürün İsmi:</label>
            <input type="text" id="product_name" name="product_name" required>
            
            <label for="model_choice">Model Seçimi:</label>
            <select id="model_choice" name="model_choice">
                <option value="naive_bayes">Naive Bayes</option>
                <option value="decision_tree">Decision Tree</option>
                <option value="logistic_regression" selected>Logistic Regression</option>
            </select>
            
            <button type="submit">Tahmin Et</button>
        </form>
        
        <div id="result" style="display: none; margin-top: 20px;">
            <h3 id="prediction"></h3>
        </div>
    </div>

    <!-- Section 2: Bulk Prediction & Association -->
    <div class="container" id="analiz">
        <h2>Toplu Analiz ve Birliktelik</h2>
        <form id="bulk-prediction-form">
            <label for="csv_file">CSV Dosyası Seçin:</label>
            <input type="file" id="csv_file" name="csv_file" accept=".csv" required>
            
            <label for="bulk_model_choice">Model Seçimi:</label>
            <select id="bulk_model_choice" name="bulk_model_choice">
                <option value="naive_bayes">Naive Bayes</option>
                <option value="decision_tree">Decision Tree</option>
                <option value="logistic_regression" selected>Logistic Regression</option>
            </select>
            
            <button type="submit">Analiz Et</button>
        </form>
        
        <div id="bulk-result" style="display: none; margin-top: 30px;">
            <div id="bulk-loading" class="loading-message" style="display: none;">Analiz ediliyor...</div>
            <div id="bulk-error" class="error-message" style="display: none;"></div>
            <div id="bulk-content" style="display: none;">
                <h3>Sipariş Bazlı Kategori Tahminleri:</h3>
                <div id="bulk-predictions"></div>
                <div class="association-results" id="association-results-container" style="display: none;">
                    <h3 class="association-title">Birliktelik Analizi Sonuçları:</h3>
                    <div id="association-rules"></div>
                    <div id="association-info"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section 3: Playground - DRAG & DROP -->
    <div class="container" id="optimizasyon">
        <h2>Market Raf Düzeni Optimizasyonu</h2>
        
        <!-- Algoritma Açıklama Kutusu -->
        <div class="algorithm-info-box">
            <h4>📊 Algoritma Nasıl Çalışır?</h4>
            <div class="algorithm-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <div>
                        <h5>Veri Toplama</h5>
                        <p>Sipariş verilerinden ürün kategorileri belirlenir.</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">2</span>
                    <div>
                        <h5>Birliktelik Analizi</h5>
                        <p>Hangi kategorilerin birlikte satın alındığı analiz edilir (Lift > 1 olan pozitif ilişkiler).</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">3</span>
                    <div>
                        <h5>Kategori Puanlama</h5>
                        <p>Her kategori, ilişki gücüne göre puanlanır.</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">4</span>
                    <div>
                        <h5>Raf Mesafe Hesaplama</h5>
                        <p>Raflar arası Öklid mesafeleri hesaplanır.</p>
                    </div>
                </div>
                <div class="step">
                    <span class="step-number">5</span>
                    <div>
                        <h5>Optimizasyon</h5>
                        <p><strong>"İlişkili Kategorileri Yakın Tut":</strong> İlişkisi yüksek olan kategorilerin rafları birbirine yakın yerleştirilir.<br>
                        <strong>"İlişkili Kategorileri Uzak Tut":</strong> İlişkisi yüksek olan kategorilerin rafları birbirinden uzağa yerleştirilir.</p>
                    </div>
                </div>
            </div>
            <div class="algorithm-validation">
                <p><strong>Doğrulama İpucu:</strong> Farklı raf düzenleri oluşturarak ve optimizasyon hedefini değiştirerek sonuçları karşılaştırın. 
                Birliktelik kurallarında Lift > 1 olan kategorilerin yerleşimini kontrol edin.</p>
            </div>
        </div>
        
        <form id="playground-form">
            <label>Mağaza Alanı:</label>
            <div class="store-controls">
                <button type="button" id="add-shelf-btn" class="premium-btn add-btn">
                    <i class="icon">➕</i>
                    <span>Premium Raf Ekle</span>
                </button>
                <button type="button" id="clear-all-shelves-btn" class="premium-btn clear-btn">
                    <i class="icon">🗑️</i>
                    <span>Tüm Rafları Temizle</span>
                </button>
                <div class="shelf-counter">
                    <span>Toplam Raf: </span>
                    <span id="shelf-count">0</span>
                </div>
            </div>
            
            <div id="store-layout-wrapper">
                <div id="store-layout-area" style="width: 1000px; height: 600px; position: relative; border: 2px solid #ddd; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
                    <!-- Premium draggable shelves will be added here by JS -->
                </div>
            </div>
            
            <label for="playground_csv_file">Sipariş Verilerini İçeren CSV Dosyası:</label>
            <input type="file" id="playground_csv_file" name="csv_file" accept=".csv" required>
            
            <label for="playground_model_choice">Model Seçimi:</label>
            <select id="playground_model_choice" name="model_choice">
                <option value="naive_bayes">Naive Bayes</option>
                <option value="decision_tree">Decision Tree</option>
                <option value="logistic_regression" selected>Logistic Regression</option>
            </select>
            
            <label for="time_goal">Optimizasyon Hedefi:</label>
            <select id="time_goal" name="time_goal">
                <option value="minimize">İlişkili Kategorileri Yakın Tut (Alışveriş Süresini Azalt)</option>
                <option value="maximize">İlişkili Kategorileri Uzak Tut (Mağaza Gezintisini Artır)</option>
            </select>
            
            <button type="submit">Raf Önerilerini Hesapla</button>
        </form>
        
        <div id="playground-result" style="display: none; margin-top: 30px;">
            <div id="playground-loading" class="loading-message" style="display: none;">Öneriler hesaplanıyor...</div>
            <div id="playground-error" class="error-message" style="display: none;"></div>
            <div id="playground-content" style="display: none;">
                <h3>Raf Kategori Önerileri:</h3>
                <ul id="recommendation-list" class="recommendation-list"></ul>
                <div id="unassigned-info" class="unassigned-info" style="display: none;"></div>
                
                <div class="playground-association-summary">
                     <h4>Analiz Özeti:</h4>
                     <div id="playground-association-info"></div>
                     <div id="playground-top-rules"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- About Section -->
    <div class="container" id="hakkinda">
        <h2>Hakkımızda</h2>
        <div class="about-content">
            <div class="about-card">
                <div class="about-icon">🤖</div>
                <h3>Yapay Zeka Destekli</h3>
                <p>En güncel makine öğrenmesi algoritmaları ile ürün kategorilerini doğru tahmin eder.</p>
            </div>
            <div class="about-card">
                <div class="about-icon">📊</div>
                <h3>Birliktelik Analizi</h3>
                <p>Müşteri alışveriş alışkanlıklarını analiz ederek optimum raf düzeni önerir.</p>
            </div>
            <div class="about-card">
                <div class="about-icon">🎯</div>
                <h3>Kolay Kullanım</h3>
                <p>Sürükle-bırak arayüzü ile mağaza düzeninizi kolayca optimize edin.</p>
            </div>
            <div class="about-card">
                <div class="about-icon">📈</div>
                <h3>Performans Artışı</h3>
                <p>Raf düzeni optimizasyonu ile satışlarınızı ve müşteri memnuniyetini artırın.</p>
            </div>
            <div class="about-card">
                <div class="about-icon">⚡</div>
                <h3>Gerçek Zamanlı Optimizasyon</h3>
                <p>Anlık veri işleme ile mağaza performansınızı sürekli optimize eder ve satış artışı sağlar.</p>
            </div>
            <div class="about-card">
                <div class="about-icon">🛠️</div>
                <h3>7/24 Teknik Destek</h3>
                <p>Uzman ekibimiz ile kesintisiz hizmet ve anında teknik destek alın.</p>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}
